## 组成与架构

云管理中心：负责接收Agent端上报的数据，分析数据、处理扫描任务、处理攻击日志等。
Web管理端：使用浏览器访问云管理中心，负责查询服务器概况，实现配置各种安全策略等。
Agent:负责执行安全策略、上报数据等。

安装部署方式：

1. 搭建云中心：在内网环境搭建云管理中心
2. 导入授权：使用初始超级管理员账号登陆私有云管理后台，进入授权管理功能，复制机器码提交商务人员生成授权文件，并进行导入
3. 安装agent：使用提供的产品安装包，在服务器安装服务端软件
4. 使用：使用前台业务账号通过WEB端进行配置管理

各服务作用以及启动方式介绍：

* 服务作用

  ```
  nginx服务-----------反向代理（云管理中心出口）
  mysql服务-----------存储关系型数据，agent信息、用户信
  息、字典信息
  redis服务------------缓存临时数据
  Kafka -----------风险入侵信息由agent-service发送到kafka
  中，由event-service服务消费
  elasticsearch --------存储攻击日志信息、资产信息
  qincai --------------- 用于沙箱扫描webshell
  Consul--------------注册中心，注册和发现应用服务
  ```
* 启动方式

  ```
  在管理中心执行/data/startup.sh	可查看各服务启动/停止/重启命令。
  启动服务命令：/data/startup.sh all start
  ```

安装时需要开放端口：

```
443端口：提供web页面访问, Agent与云管理中心建立连接，Agent日志数据上传，Agent更新驱动、升级等
7901端口：沙箱扫描
7902端口：病毒查杀
```
