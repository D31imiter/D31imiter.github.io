#### IIS

1. 短文件名猜解漏洞

   ```
   为了兼容16位MS-DOS程序，Windows为文件名较长的文件（和文件夹）生成了对应的windows 8.3 短文件名,短文件名相对容易猜解，敏感文件泄露
   1. 只有前六位字符直接显示，后续字符用~1指代。其中数字1还可以递增，如果存在多个文件名类似的文件（名称前6位必须相同，且后缀名前3位必须相同）
   2. 后缀名最长只有3位，多余的被截断
   3. 访问构造的某个存在的短文件名，会返回404
   4. 访问构造的某个不存在的短文件名，会返回400

   猜解时可以利用通配符，*可以匹配多个或0个字符
   ```
2. PUT漏洞

   ```
   IIS Server在Web服务扩展中开启了WebDAV，配置了可以写入的权限，造成任意文件上传
   使用桂林老兵的工具进行put上传后门文件
   ```
3. 文件解析漏洞

   ```
   1. 以*.asp命名的文件夹里的文件都将会被当成ASP文件执行
   2. *.asp;.jpg 像这种畸形文件名在“；”后面的直接被忽略，也就是说当成 *.asp文件执行
   ```
4. 远程代码执行漏洞

   ```
   IIS Web服务器将http侦听器作为windows网络子系统的一部分，这是http协议栈（HTTP.sys)的内核模式设备驱动程序实现的，HTTP.sys在IIS 6.0中提供以下服务：将HTTP请求路由到正确的请求队列；以内核模式缓存响应；对WWW服务执行所有基于文本的日志记录；实现服务质量功能，包括连接限制、连接超时、队列长度限制和宽度限制。
   创建网站时IIS会使用HTTP.sys注册该网站，然后HTTP.sys会收到对该网站的所有HTTP请求。HTTP.sys的功能类似于转发器，将接收到的Web请求，发送到运行网站或Web应用程序用户模式进程的请求队列，并将响应发送回客户端。
   除了从其内部缓存中检索存储的响应之外，HTTP.sys不会处理其收到的请求。因此没有将特定于应用程序的代码加载到内核模式，因此特定于应用程序代码中的错误不会影响内核或导致系统故障。
   IIS中默认启用内核缓存，执行与请求处理管道中缓存有关的任务。
   缓存通过将处理后的信息（如Web页面）存储在服务器上的内存中来提高性能。
   使用Range HTTP标头利用此漏洞，
   此HTTP标头允许客户端根据需要，从服务器请求特定的内容。
   Range标头的上限是0xFFFFFFFFFFFFFFFFFF，
   这是最大的64位无符号整数。
   攻击者发送带有此值的HTTP请求，将导致整数溢出，
   服务器回显为‘请求的范围无法满足’，这意味着客户端要求文件的一部分超出服务器上文件末尾的位置。
   成功利用攻击还会导致拒绝服务。
   ```

#### Apache

1. 解析漏洞

   ```
   从右向左识别后缀名，直到遇到合法后缀未知，例如shell.php.xxx,xxx不合法，按php解析
   *.php\x0a将被按照PHP后缀进行解析
   ```
2. 目录遍历

   ```
   当客户端访问到一个目录时，Apache服务器将会默认寻找一个index list中的文件，若文件不存在，则会列出当前目录下所有文件或返回403状态码，而列出目录下所有文件的行为称为目录遍历
   配置错误：更改配置修复
   在httpd.conf文件中找到Options + Indexes + FollowSymLinks + ExecCGI并修改成Options - Indexes +FollowSymLinks + ExecCGI并保存
   ```

#### Nginx

1. 文件解析漏洞

   ```
   cgi.fix_pathinfo,该选项位于php.ini中，默认为1，表示开启。当php遇到文件路径/test.png/x.php时，若/test.png/x.php不存在，则会去掉最后的/x.php，然后判断/test.png是否存在，若存在，则把/test.png当做文件/test.png/x.php解析，如若test.png还不存在如果在其前面还有后缀，继续前面的步骤，以此类推。若是关闭该选项，访问/test.jpg/x.php 只会返回找不到文件。
   ```
2. CRLF注入：

   ```
   Nginx会将$uri进行解码，导致传入%0d%0a即可引入换行符，造成CRLF注入漏洞，将换行符之后内内容追加到返回的数据包中，造成xss漏洞
   ```

#### Redis

未授权访问漏洞

```
在保护模式为开启的情况下才有可能利用
1. redis-cli -h [ip] 远程连接redis
2. info查看一些服务信息
3. config get dir|dbfilename 获取默认的目录以及rdb文件名，最后复原
4. config set dir [path] 决定写入文件的路径
5. config set dbfilename [filename] 决定写入的文件名
6. set key value 来确定文件的内容，key值任意即可，value即为文件内容
7. 使用save命令来确定以上所有操作并生成文件
三种利用，写webshell，公钥，php反弹shell

防护
1. 开启保护模式
2. 以低权限运行redis
3. 添加验证密码
4. 禁止外网访问redis
```
