## VMware网络配置

#### 虚拟交换机

**VMware虚拟出了三个虚拟交换机**

* VMnet0：（无实体虚拟网卡，本质是一个协议）本物理主机及其虚拟机都连接到此虚拟交换机，该虚拟交换机再连接到物理路由器。虚拟机可以与外网相连，外网可以访问虚拟机。
* VMnet1：虚拟机连接到此虚拟交换机，此虚拟交换机与本物理主机相连，再由物理主机连接外网（或是VMnet0）。官方定义虚拟机不能与外网相连，外网不可以访问虚拟机。
* VMnet8：虚拟机连接到此虚拟交换机，此虚拟交换机与本物理主机相连，再由物理主机连接外网（或是VMnet0）。本物理主机与外网连通的情况下，虚拟机可以访问外网，本物理主机与外网断开连接的情况下，虚拟机不可以访问外网，本物理主机以外的网络不能访问使用VMnet8的虚拟机。

#### 网络连接模式

* 桥接模式，虚拟机连接到VMnet0
* 仅主机模式，虚拟机连接到VMnet1
* NAT模式，虚拟机连接到VMnet8

#### 总连接关系

使用仅主机模式的虚拟机连接到VMnet1虚拟交换机，使用仅NAT模式的虚拟机连接到VMnet8虚拟交换机，VMnet1虚拟交换机和VMnet8虚拟交换机再连接到本物理主机，本物理主机和使用桥接模式的虚拟机连接到VMnet0。

**物理主机一般没有路由功能，因此：**

* VMnet0默认不能访问VMnet1、VMnet8
* VMnet1默认不能访问VMnet0、VMnet8
* VMnet8默认不能访问VMnet1，单向访问VMnet0

若物理主机是服务器系统，路由功能开启后各虚拟主机以及本物理主机之间可以互相访问

#### 配置

* 仅主机模式最安全但无法访问外网。桥接模式和NAT模式相比之下安全性没有太大差别。
* 配置虚拟主机的网络连接，全部用NAT模式或桥接模式，各虚拟主机就可以相互连通。
* 当镜像文件格式为ova的时候，可能出现虚拟硬件不兼容的情况，导致靶机连不上网，可以进入安全模式修改虚拟网卡配置文件，但十分麻烦，最好下一个VirtualBox，所有虚拟机使用桥接模式即可互相ping同

